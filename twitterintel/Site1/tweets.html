
<html>
<head>
  <title>dc.js - Bar Chart Example</title>
    
  <meta charset="utf-8"></meta>
  <link rel="stylesheet" type="text/css" href="http://dc-js.github.io/dc.js/css/dc.css" />
  <script src="http://dc-js.github.io/dc.js/js/d3.js"></script>
  <script src="http://dc-js.github.io/dc.js/js/crossfilter.js"></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
  <script src="http://dc-js.github.io/dc.js/js/dc.js"></script>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <style type="text/css">
        select {
  margin: 5px;
  width: 200px !important;
}
select.custom {
  padding: 0px;
}
    </style>
</head>

<body background="../images/1.jpg">
    <nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Twitter Graphs</a>
    </div>
    <ul class="nav navbar-nav">
      <li class="active"><a href="start.html">Start New Research</a></li>
      <li><a href="rankingwords.html">Re-set Word Probability</a></li>
      <li><a href="topwordsgraphs2.html">Top Two Word</a></li> 
      <li><a href="topwordsgraphs3.html">Top Three Word</a></li>
      <li><a href="tweets.html">All tweets Changes Avaliation</a></li>
        <li><a href="exprimentar.html">Info</a></li>
    </ul>
  </div>
</nav>
<input type="button" class="btn btn-primary" name="answer" value="Refresh" onclick="loadDoc()" />

<table id="tabela" class="table table-bordered">
          <thead>
              <tr>
                  <th>Sentiment</th>
                  <th>Tweet</th>
            </tr>
        </thead>
          <tbody name="unico">
              
        </tbody>
  </table>
    <div style="display:none" id="second">
    <input class="btn btn-primary" type="button" name="answer" value="Submit Tweets to Calculate Probability" onclick="startFeed()" />
        </div>			








<script type="text/javascript">
function loadDoc() {
   var data= new Array()

   
   $.ajax({
       
          type: "GET",
          crossDomain: true,
          url: "http://localhost:7000/getTweetsBad",
          dataType: "json",
          success: function(result){
                 for(var key in result){
                 var aux = result[String(key)];
                 data.push(aux);
                 }
                 loadTweetsBad(data)

          },
          error : function(e){
                alert(e)
          }
  })
   $.ajax({
          type: "GET",
          crossDomain: true,
          url: "http://localhost:7000/getTweetsGood",
          dataType: "json",
          success: function(result){
                 for(var key in result){
                 var aux = result[String(key)];
                 data.push(aux);
                 }
                 loadTweetsGood(data)

          },
          error : function(e){
                alert(e)
          }
       
  })
   $.ajax({
          type: "GET",
          crossDomain: true,
          url: "http://localhost:7000/getTweetsSpam",
          dataType: "json",
          success: function(result){
                 for(var key in result){
                 var aux = result[String(key)];
                 data.push(aux);
                 }
                 loadTweetsSpam(data)

          },
          error : function(e){
                alert(e)
          }
  })
   $("#second").show()
  }
    
function loadTweetsGood(data)
    {
        var table = $("#tabela");
        var button = '<tr><td><select class="form-control custom"><option>Good</option><option>Bad</option><option>Spam</option></select></ul></div></td>';
        for (var key in data)
        {
            table.append(button+ '<td name="tweet"><h3>' + data[key]['tweet']  + '</h3></td></tr>'  )
        }
    }
 function loadTweetsBad(data)
    {
        var table = $("#tabela");
        var button = '<tr><td><select class="form-control custom"><option>Bad</option><option>Good</option><option>Spam</option></select></ul></div></td>';
        for (var key in data)
        {
            table.append(button+ '<td name="tweet"><h3>' + data[key]['tweet']  + '</h3></td></tr>'  )
        }
    }   
  function loadTweetsSpam(data)
    {
        var table = $("#tabela");
        var button = '<tr><td><select class="form-control custom"><option>Spam</option><option>Good</option><option>Bad</option></select></ul></div></td>';
        for (var key in data)
        {
            table.append(button+ '<td name="tweet"><h3>' + data[key]['tweet']  + '</h3></td></tr>'  )
        }
    }
    function startFeed()
        {
        array={}
        $("#tabela").find('[name=tweet]').each(function(index){
        array[index]={}
        array[index]['tweet']=$(this).text();
        });
        $("select").each(function(index){
           array[index]['answer']=$(this).find('option:selected').text(); 
        });
        var track = $('[name=track]').val();
        console.log(array);
        $.ajax({
          type: "GET",
          crossDomain: true,
          data: {id:JSON.stringify(array)},     // content type sent to server
          dataType: "json",
          url: "http://localhost:7000/Results",
          success: function(result){
                 window.location.replace("http://www.smartintelanalysis.com/rankingwords.html");
          },
          error : function(e){
                window.location.replace("http://www.smartintelanalysis.com/rankingwords.html")
          }
            })
        }

</script>


</body>

</html>

