<!DOCTYPE html>
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>

    <title>Untitled Document</title>

    <meta http-equiv = "Content-Type" content = "text/html; charset = utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="http://dc-js.github.io/dc.js/css/dc.css" />
  <script src="http://dc-js.github.io/dc.js/js/d3.js"></script>
  <script src="http://dc-js.github.io/dc.js/js/crossfilter.js"></script>
  <script src="http://dc-js.github.io/dc.js/js/dc.js"></script>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <link rel = "stylesheet" type = "text/css" href = "#" />
    <!--Add your .css file-->



    <style type="text/css">
        /* Set all parents to full height */
html, body, 
.container,
.cbp-fbscroller,
.cbp-fbscroller section { 
	height: 100%; 
}

/* The nav is fixed on the right side  and we center it by translating it 50% 
(we don't know it's height so we can't use the negative margin trick) */
.cbp-fbscroller > nav {
	position: fixed;
	z-index: 9999;
	right: 100px;
	top: 50%;
	-webkit-transform: translateY(-50%);
	-moz-transform: translateY(-50%);
	-ms-transform: translateY(-50%);
	transform: translateY(-50%);
}

.cbp-fbscroller > nav a {
	display: block;
	position: relative;
	color: transparent;
	height: 50px;
}

.cbp-fbscroller > nav a:after {
	content: '';
	position: absolute;
	width: 24px;
	height: 24px;
	border-radius: 50%;
	border: 4px solid #fff;
}

.cbp-fbscroller > nav a:hover:after {
	background: rgba(255,255,255,0.6);
}

.cbp-fbscroller > nav a.cbp-fbcurrent:after {
	background: #fff;
}

/* background-attachment does the trick */
.cbp-fbscroller section {
	position: relative;
	background-position: top center;
	background-repeat: no-repeat;
	background-size: cover;
	background-attachment: fixed;
}

#fbsection1 {
	background-image: url(../images/1.jpg);
}

#fbsection2 {
	background-image: url(../images/2.jpg);
}

#fbsection3 {
	background-image: url(../images/3.jpg);
}

#fbsection4 {
	background-image: url(../images/4.jpg);
}

#fbsection5 {
	background-image: url(../images/5.jpg);
}
    
    </style>
    <!--  Internal css link -->

    <script src = "http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <script type = "text/javascript" src = "#"></script>

    <!--Add Your External jQuery Plugin-->



    <script type = "text/javascript" lang="javascript">


    </script>
    <!--  Internal jquery/javascript link-->

</head>


<body>
    <nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Twitter Graphs</a>
    </div>
    <ul class="nav navbar-nav">
      <li class="active"><a href="start.html">Start New Research</a></li>
      <li><a href="rankingwords.html">Re-set Word Probability</a></li>
      <li><a href="topwordsgraphs2.html">Top Two Word</a></li> 
      <li><a href="topwordsgraphs3.html">Top Three Word</a></li>
      <li><a href="tweets.html">All tweets Changes Avaliation</a></li>
        <li><a href="exprimentar.html">Info</a></li>
    </ul>
  </div>
</nav>
<div id="cbp-fbscroller" class="cbp-fbscroller">
	<nav>
		<a href="#fbsection1" class="cbp-fbcurrent">Section 1</a>
		<a href="#fbsection2">Section 2</a>
		<a href="#fbsection3">Section 3</a>
		<a href="#fbsection4">Section 4</a>
		<a href="#fbsection5">Section 5</a>
	</nav>
	<section id="fbsection1">

        <div id="contagemtotal">
        <input  type="button" class="btn btn-primary" name="answer" value="Refresh" onclick="loadDoc()" />
        </div>
    </section>
    <section id="fbsection2">
        <div id="good"><input class="btn btn-primary" type="button" name="answer" value="Refresh" onclick="loadDoc()"/>
        </div>
    </section>    
	<section id="fbsection3">
        <div id="bad"><input  class="btn btn-primary" type="button" name="answer" value="Refresh" onclick="loadDoc()" />
        </div>
    </section>
	<section id="fbsection4">
        <div id="spam"><input  class="btn btn-primary"  type="button" name="answer" value="Refresh" onclick="loadDoc()" />
        </div>
    </section>
	<section id="fbsection5">
    </section>
</div>

<script type="text/javascript">
    function loadDoc() {
   var data= new Array()
   
   $.ajax({
          type: "GET",
          crossDomain: true,
          url: "http://localhost:7000/getTotal",
          dataType: "json",
          success: function(result){
                 for(var key in result){
                 var aux = result[String(key)];
                 data.push(aux);
                 }
                 loadPieGraph(data)

          },
          error : function(e){
                alert(e)
          }
  })
  } 
  

  

function loadPieGraph(data){
  var chart = dc.pieChart("#contagemtotal");
  var composite = dc.compositeChart("#goodComposite");

  var ndx           = crossfilter(data),
      runDimension  = ndx.dimension(function(d) {return d.tipo;})
      speedSumGroup = runDimension.group().reduceSum(function(d) {return d.contagem;});

  chart
  .width(1000)
  .height(600)
  .slicesCap(4)
  .innerRadius(100)
  .dimension(runDimension)
  .group(speedSumGroup)
  .legend(dc.legend())
  .on('pretransition', function(chart) {
  chart.selectAll('text.pie-slice').text(function(d) {
  return d.data.key + ' ' + dc.utils.printSingleValue((d.endAngle - d.startAngle) / (2*Math.PI) * 100) + '%';
        })
    });

  chart.render();
  }
   
   var datagood= new Array();
   var databad= new Array();
   var dataspam= new Array();
   
   $.ajax({
          type: "GET",
          crossDomain: true,
          data: {id:"40"},
          url: "http://localhost:7000/getTopWordSpam",
          dataType: "json",
          success: function(result){
                 for(var key in result){
                 var aux = result[String(key)];
                 dataspam.push(aux);
                 }
                 loadGraphSpam(dataspam)

          },
          error : function(e){
                alert(e)
          }
  })
   $.ajax({
          type: "GET",
          crossDomain: true,
          data: {id:"40"},
          url: "http://localhost:7000/getTopWordGood",
          dataType: "json",
          success: function(result){
                 for(var key in result){
                 var aux = result[String(key)];
                 datagood.push(aux);
                 }
                 loadGraphGood(datagood)

          },
          error : function(e){
                alert(e)
          }
  })
   $.ajax({
          type: "GET",
          crossDomain: true,
          data: {id:"40"},
          url: "http://localhost:7000/getTopWordBad",
          dataType: "json",
          success: function(result){
                 for(var key in result){
                 var aux = result[String(key)];
                 databad.push(aux);
                 }
                 loadGraphBad(databad)

          },
          error : function(e){
                alert(e)
          }
  })
  

  

function loadGraphGood(data)
  {
  var chart = dc.barChart("#good");
  var ndx = crossfilter(data);
  var folDimension = ndx.dimension(function(d) { return d.word;});
  var folGroup = folDimension.group().reduceSum(function(d) { return +d.count;});

  chart
        .width(1000)
        .height(600)
        .x(d3.scale.ordinal().domain(data.map(function(d) { return d.word;})))
        .brushOn(false)
        .yAxisLabel("This is the Good Chart!")
        .dimension(folDimension)
        .group(folGroup)
        .xUnits(dc.units.ordinal)
        .on('renderlet', function(chart) {
            chart.selectAll('rect').on("click", function(d) {
                console.log("click!", d.x);
            });
        });
  chart.render();
  }
    
    
    
function loadGraphBad(data)
  {
  var chart = dc.barChart("#bad");
  var ndx = crossfilter(data);
  var folDimension = ndx.dimension(function(d) { return d.word;});
  var folGroup = folDimension.group().reduceSum(function(d) { return +d.count;});

  chart
        .width(1000)
        .height(600)
        .x(d3.scale.ordinal().domain(data.map(function(d) { return d.word;})))
        .brushOn(false)
        .yAxisLabel("This is the BAD Chart!")
        .dimension(folDimension)
        .group(folGroup)
        .xUnits(dc.units.ordinal)
        .on('renderlet', function(chart) {
            chart.selectAll('rect').on("click", function(d) {
                console.log("click!", d.x);
            });
        });
  chart.render();
  }
    
function loadGraphSpam(data)
  {
  var chart = dc.barChart("#spam");
  var ndx = crossfilter(data);
  var folDimension = ndx.dimension(function(d) { return d.word;});
  var folGroup = folDimension.group().reduceSum(function(d) { return +d.count;});

  chart
        .width(1000)
        .height(600)
        .x(d3.scale.ordinal().domain(data.map(function(d) { return d.word;})))
        .brushOn(false)
        .yAxisLabel("This is the SPAM Chart!")
        .dimension(folDimension)
        .group(folGroup)
        .xUnits(dc.units.ordinal)
        .on('renderlet', function(chart) {
            chart.selectAll('rect').on("click", function(d) {
                console.log("click!", d.x);
            });
        });
  chart.render();
  }
/**
 * cbpFixedScrollLayout.js v1.0.0
 * http://www.codrops.com
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * Copyright 2013, Codrops
 * http://www.codrops.com
 */
var cbpFixedScrollLayout = (function() {

	// cache and initialize some values
	var config = {
		// the cbp-fbscroller´s sections
		$sections : $( '#cbp-fbscroller > section' ),
		// the navigation links
		$navlinks : $( '#cbp-fbscroller > nav:first > a' ),
		// index of current link / section
		currentLink : 0,
		// the body element
		$body : $( 'html, body' ),
		// the body animation speed
		animspeed : 650,
		// the body animation easing (jquery easing)
		animeasing : 'easeInOutExpo'
	};

	function init() {

		// click on a navigation link: the body is scrolled to the position of the respective section
		config.$navlinks.on( 'click', function() {
			scrollAnim( config.$sections.eq( $( this ).index() ).offset().top );
			return false;
		} );

		// 2 waypoints defined:
		// First one when we scroll down: the current navigation link gets updated. 
		// A `new section´ is reached when it occupies more than 70% of the viewport
		// Second one when we scroll up: the current navigation link gets updated. 
		// A `new section´ is reached when it occupies more than 70% of the viewport
		config.$sections.waypoint( function( direction ) {
			if( direction === 'down' ) { changeNav( $( this ) ); }
		}, { offset: '30%' } ).waypoint( function( direction ) {
			if( direction === 'up' ) { changeNav( $( this ) ); }
		}, { offset: '-30%' } );

		// on window resize: the body is scrolled to the position of the current section
		$( window ).on( 'debouncedresize', function() {
			scrollAnim( config.$sections.eq( config.currentLink ).offset().top );
		} );
		
	}

	// update the current navigation link
	function changeNav( $section ) {
		config.$navlinks.eq( config.currentLink ).removeClass( 'cbp-fbcurrent' );
		config.currentLink = $section.index( 'section' );
		config.$navlinks.eq( config.currentLink ).addClass( 'cbp-fbcurrent' );
	}

	// function to scroll / animate the body
	function scrollAnim( top ) {
		config.$body.stop().animate( { scrollTop : top }, config.animspeed, config.animeasing );
	}

	return { init : init };

})();

</script>


</body>

</html>
