<!DOCTYPE html>
<html>
<head>
  <title>dc.js - Bar Chart Example</title>
    
  <meta charset="utf-8"></meta>
  <link rel="stylesheet" type="text/css" href="http://dc-js.github.io/dc.js/css/dc.css" />
  <script src="http://dc-js.github.io/dc.js/js/d3.js"></script>
  <script src="http://dc-js.github.io/dc.js/js/crossfilter.js"></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
  <script src="http://dc-js.github.io/dc.js/js/dc.js"></script>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <style type="text/css">
        select {
  margin: 5px;
  width: 200px !important;
}
select.custom {
  padding: 0px;
}
    </style>
</head>

<body background="../images/1.jpg">
    <nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Twitter Graphs</a>
    </div>
    <ul class="nav navbar-nav">
      <li class="active"><a href="start.html">Start New Research</a></li>
      <li><a href="rankingwords.html">Re-set Word Probability</a></li>
      <li><a href="topwordsgraphs2.html">Top Two Word</a></li> 
      <li><a href="topwordsgraphs3.html">Top Three Word</a></li>
      <li><a href="tweets.html">All tweets/Change Avaliation</a></li>
        <li><a href="exprimentar.html">Info</a></li>
    </ul>
  </div>
</nav>
    <div id="first">
        <input name="track1" type="email" class="form-control" id="exampleInputEmail1" placeholder="2 or More Key Words to the Topic in study                                         Ex: nevertrump,votetrump Ex: messi,ronaldo                                                       5Give us your best shoot"/>
        <input name="number" type="text" class="form-control" id="exampleInputEmail1" placeholder="Number of tweets you want to analyze"/>

<input class="btn btn-primary" type="button" name="button1" value="Get Learning Tweets" onclick="loadDoc()" />
    </div>

<table id="tabela" class="table table-bordered">
          <thead>
              <tr>
                  <th>Sentiment</th>
                  <th>Tweet</th>
            </tr>
        </thead>
          <tbody name="unico">
              
        </tbody>
  </table>
    <div style="display:none" id="second">

<input class="btn btn-primary" type="button" name="answer" value="Go to Probability Ranking" onclick="otherpage()" />
    </div>
</body>

</html>

<script type="text/javascript">
  
  function loadDoc() {
   var send = new Array()
   var number = $('[name=number]').val();
   
   var data= new Array();
   var track = $('[name=track1]').val();
   if (track == '')
   {
       alert("RONGSTRING");
       return false;
   }
   send[0] = track;
   send[1] = number;
   alert(String(track));
   $.ajax({
          type: "GET",
          crossDomain: true,
          data: {id:JSON.stringify(send)},
          url: "http://localhost:7000/Learning",
          dataType: "json",
          success: function(result){
                 questionConstructor(result);
          },
          error : function(e){
                alert(e);
          }
  })
  } 
  
    
function questionConstructor(data){
    var button = '<tr><td><select class="form-control custom"><option>Good</option><option>Bad</option><option>Spam</option></select></ul></div></td>';
    for(var key in data){
        
        $('[name=unico]').append(button + '<td name="tweet"><h3>' + String(data[String(key)])  + '</h3></td></tr>');
        
        //$(".tabela").append('<select class="' + String(key) + '">' + "<option>Good</option><option>Bad</option><option>Spam</option></select>");
    }
    $("#first").hide()
    $("#second").show()
}
function otherpage(){
    var array = {}
    $("#tabela").find('[name=tweet]').each(function(index){
        array[index]={}
        array[index]['tweet']=$(this).text();
    });
    count = 0
    $("select").each(function(index){
       array[index]['answer']=$(this).find('option:selected').text(); 
    });
    
    var track = $('[name=track2]').val();
    $.ajax({
          type: "GET",
          crossDomain: true,
          data: {id:JSON.stringify(array)},     // content type sent to server
          dataType: "json",
          url: "http://localhost:7000/Results",
          success: function(result){
                 window.location.replace("http://rankingwords.html");
          },
          error : function(e){
                window.location.replace("http://rankingwords.html")
          }
  })
    
    
}
</script>